# StickyNote

Windows 上的极简便签应用，基于 WPF/.NET 8 构建。支持多窗口、自动保存、防抖与原子写盘、系统托盘、统一快捷键、贴边吸附与智能定位、牛皮纸底色与横线风格等，专注于流畅的书写与稳定的数据安全。

## 特性

- 自动保存：键入后短暂防抖触发，减少磁盘写入
- 原子写盘：写入到临时文件并替换，避免意外中断导致数据损坏
- 多窗口管理：启动仅恢复一个窗口，托盘菜单可“显示全部/隐藏全部”
- 贴边吸附与智能定位：新建窗口基于网格智能放置，避免重叠
- 置顶反馈与阴影优化：切换置顶时有可视化提示与 DPI 友好的阴影
- 统一快捷键与命令：常用操作以 `Ctrl` 快捷键统一触发
- 背景与横线：牛皮纸底色与行间横线合成画刷，文字行高对齐
- 性能优化：合适的 `BitmapCache`、文本渲染模式，交互更顺滑
 - 系统托盘：快捷入口、新建、搜索、平铺排列、开机自启动、导出全部、恢复最近删除、退出
 - 全局热键：`Ctrl+Alt+N` 新建便签，`Ctrl+Alt+F` 打开搜索
 - 应用图标：窗口与托盘均使用便签风格图标

## 构建与运行

### 环境要求

- Windows 10/11
- .NET SDK 8.0+
- 任意支持 .NET 的 IDE（Visual Studio / VS Code）

### 命令行

```bash
dotnet build -c Release
```

生成后的二进制位于：`bin/Release/net8.0-windows/StickyNote.exe`

### Visual Studio

- 打开解决方案/项目后直接 `F5` 运行或选择 Release 构建

## 快捷键

- `Ctrl+N` 新建便签
- `Ctrl+D` 删除当前便签
- `Ctrl+E` 导出为文本
- `Ctrl+Enter` 插入分隔线
- `Ctrl+W` 关闭当前窗口
- `Ctrl+T` 切换置顶
- 文本编辑：`Ctrl+C` 复制、`Ctrl+V` 粘贴、`Ctrl+A` 全选

## 系统托盘菜单

- 新建便签、显示全部、隐藏全部
- 搜索便签、平铺排列、启用/禁用全局热键、开机自启动
- 导出全部便签、恢复最近删除、退出

## 数据存储

- 便签数据以 JSON 保存到：`%APPDATA%/StickyNotes_Data.json`
- 写盘采用临时文件与替换策略，异常情况下尽可能保证数据安全

## 已知行为说明

- 首次运行或无保存数据时，将打开一个新的便签窗口
- 若已有多条便签记录，启动时仅恢复一条，其余可在托盘菜单选择“显示全部”恢复

## 贡献与开发

- 项目采用 WPF（`UseWPF`）与 Windows Forms（`UseWindowsForms`）以使用托盘与热键
- 主要入口：`App.xaml.cs`（启动、托盘、热键），`MainWindow.xaml/.cs`（UI 与交互）
- 构建目标：`net8.0-windows`
 - 可选：提供 `.ico` 文件后，可设置为应用图标并用于托盘


